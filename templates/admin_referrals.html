{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2 style="margin: 30px 0;">Referral Withdrawals</h2>
    <table class="admin-table">
        <tr>
            <th>User</th>
            <th>Tokens</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for req in requests %}
        <tr>
            <td>{{ user_map.get(req.user_id, req.user_id) }}</td>
            <td>{{ req.tokens }}</td>
            <td>₦{{ "{:,.0f}".format(req.amount) }}</td>
            <td>{{ req.status }}</td>
            <td>
                {% if req.status == 'pending' %}
                    <form method="POST" action="{{ url_for('admin.approve_referral_withdrawal', request_id=req.id) }}" style="display:inline-block;">
                        <button class="btn btn-success" type="submit">Approve</button>
                    </form>
                    <form method="POST" action="{{ url_for('admin.reject_referral_withdrawal', request_id=req.id) }}" style="display:inline-block;">
                        <button class="btn btn-danger" type="submit">Reject</button>
                    </form>
                {% else %}
                    —
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
